---
name: phaser-developer
description: Phaser 3 æ¸¸æˆå¼€å‘æŠ€èƒ½ã€‚å½“ç”¨æˆ·éœ€è¦åˆ›å»º 2D æ¸¸æˆã€ä½¿ç”¨ Phaser æ¡†æ¶ã€å¤„ç†æ¸¸æˆç‰©ç†/åŠ¨ç”»/è¾“å…¥æ—¶æ¿€æ´»ã€‚æ”¯æŒè€è™æœºã€å¹³å°è·³è·ƒã€å°„å‡»ã€æ¶ˆé™¤ã€è·‘é…·ç­‰æ¸¸æˆç±»å‹ã€‚åŒ…å«é®ç½©ã€ç¼“åŠ¨ã€å“åº”å¼å¸ƒå±€ç­‰é«˜çº§ç‰¹æ€§ã€‚
---

# Phaser Developer

å¸®åŠ© AI ä½¿ç”¨ Phaser 3 æ¡†æ¶å¼€å‘ 2D æ¸¸æˆã€‚

## è§¦å‘åœºæ™¯

- åˆ›å»ºæ¸¸æˆæˆ–æ¸¸æˆåŸå‹
- ä½¿ç”¨ Phaserã€Phaser 3 å¼€å‘
- å¤„ç†æ¸¸æˆç‰©ç†ã€ç²¾çµåŠ¨ç”»ã€ç¢°æ’æ£€æµ‹
- åˆ›å»ºè€è™æœºã€å¹³å°è·³è·ƒã€å°„å‡»ã€æ¶ˆé™¤ç­‰æ¸¸æˆ

## é¡¹ç›®ç»“æ„ (Bun + Vite)

```
game-project/
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tsconfig.json
â””â”€â”€ src/
    â””â”€â”€ main.ts
```

### package.json

```json
{
  "scripts": { "dev": "vite", "build": "vite build" },
  "dependencies": { "phaser": "^3.90.0" },
  "devDependencies": { "typescript": "^5.9.2", "vite": "^7.1.3" }
}
```

### æœ€å°æ¸¸æˆæ¨¡æ¿

```typescript
import Phaser from 'phaser';

class MainScene extends Phaser.Scene {
  constructor() { super('MainScene'); }
  preload() { this.load.image('player', 'assets/player.png'); }
  create() { this.player = this.add.sprite(400, 300, 'player'); }
  update(time: number, delta: number) { /* æ¸¸æˆå¾ªç¯ */ }
}

const config: Phaser.Types.Core.GameConfig = {
  type: Phaser.AUTO,
  width: 800,
  height: 600,
  scene: MainScene,
  physics: { default: 'arcade', arcade: { gravity: { y: 300 } } }
};

new Phaser.Game(config);
```

## æ ¸å¿ƒæ¦‚å¿µé€ŸæŸ¥

### åœºæ™¯ç”Ÿå‘½å‘¨æœŸ

`init(data)` â†’ `preload()` â†’ `create()` â†’ `update(time, delta)` å¾ªç¯

### æ¸¸æˆå¯¹è±¡

```typescript
this.add.image(x, y, 'key');                    // é™æ€å›¾ç‰‡
this.add.sprite(x, y, 'key');                   // ç²¾çµ
this.physics.add.sprite(x, y, 'key');           // ç‰©ç†ç²¾çµ
this.add.text(x, y, 'Hello', { fontSize: '32px', color: '#fff' });
this.add.graphics();                            // å›¾å½¢ç»˜åˆ¶
this.add.container(x, y, [children]);           // å®¹å™¨
```

### ç‰©ç†ç³»ç»Ÿ

```typescript
this.physics.add.collider(a, b);                // ç¢°æ’
this.physics.add.overlap(a, b, callback);       // é‡å æ£€æµ‹
sprite.setVelocity(200, -300);                  // é€Ÿåº¦
sprite.body.setGravityY(500);                   // é‡åŠ›
sprite.body.setBounce(0.2);                     // å¼¹æ€§
```

### è¾“å…¥

```typescript
const cursors = this.input.keyboard.createCursorKeys();
this.input.on('pointerdown', (p) => { });
sprite.setInteractive().on('pointerdown', () => { });
```

### è¡¥é—´åŠ¨ç”»

```typescript
this.tweens.add({
  targets: sprite,
  x: 400, y: 300, scale: 2, alpha: 0.5,
  duration: 1000,
  ease: 'Power2',          // ç¼“åŠ¨å‡½æ•°
  yoyo: true, repeat: -1,
  onComplete: () => { }
});
```

## é«˜çº§ç‰¹æ€§

### é®ç½© (Mask) - æ»šåŠ¨/è£å‰ªå¿…å¤‡

```typescript
// åˆ›å»ºé®ç½©å›¾å½¢
const maskGraphics = this.add.graphics();
maskGraphics.fillStyle(0xffffff);
maskGraphics.fillRect(x, y, width, height);
maskGraphics.setVisible(false);  // éšè—é®ç½©å›¾å½¢

// åº”ç”¨é®ç½©
const mask = maskGraphics.createGeometryMask();
container.setMask(mask);  // å®¹å™¨å†…å®¹åªåœ¨é®ç½©åŒºåŸŸå¯è§
```

### ç¼“åŠ¨å‡½æ•° (Easing)

```typescript
// å¸¸ç”¨ç¼“åŠ¨
'Linear'           // çº¿æ€§
'Power2'           // äºŒæ¬¡æ–¹
'Power3'           // ä¸‰æ¬¡æ–¹
'Bounce.easeOut'   // å¼¹è·³
'Back.easeOut'     // å›å¼¹
'Elastic.easeOut'  // å¼¹æ€§
'Sine.easeInOut'   // æ­£å¼¦

// è‡ªå®šä¹‰ç¼“åŠ¨
const easeOutQuad = (t: number) => t * (2 - t);
const easeOutCubic = (t: number) => 1 - Math.pow(1 - t, 3);
const easeOutBack = (t: number) => {
  const c = 1.70158;
  return 1 + (c + 1) * Math.pow(t - 1, 3) + c * Math.pow(t - 1, 2);
};
```

### ç«–å±/å“åº”å¼é…ç½®

```typescript
const config: Phaser.Types.Core.GameConfig = {
  width: 400,   // ç«–å±å®½åº¦
  height: 720,  // ç«–å±é«˜åº¦
  scale: {
    mode: Phaser.Scale.FIT,           // é€‚åº”å±å¹•
    autoCenter: Phaser.Scale.CENTER_BOTH,  // å±…ä¸­
  },
};

// HTML viewport
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
```

### Container é«˜çº§ç”¨æ³•

```typescript
// åˆ›å»ºå¤åˆå¯¹è±¡
const card = this.add.container(x, y);
const bg = this.add.graphics().fillRect(-50, -70, 100, 140);
const icon = this.add.text(0, 0, 'ğŸ°', { fontSize: '48px' }).setOrigin(0.5);
card.add([bg, icon]);

// æ•´ä½“æ“ä½œ
card.setScale(1.2);
card.setAlpha(0.8);
card.setPosition(newX, newY);

// è®¾ç½®äº¤äº’åŒºåŸŸ
card.setSize(100, 140);
card.setInteractive({ useHandCursor: true });
```

### å®šæ—¶å™¨

```typescript
// å»¶è¿Ÿæ‰§è¡Œ
this.time.delayedCall(1000, () => { /* 1ç§’åæ‰§è¡Œ */ });

// å¾ªç¯å®šæ—¶å™¨
this.time.addEvent({
  delay: 100,
  loop: true,
  callback: () => { /* æ¯100msæ‰§è¡Œ */ }
});
```

### æ•°å­¦å·¥å…·

```typescript
Phaser.Math.Clamp(value, min, max);           // é™åˆ¶èŒƒå›´
Phaser.Math.Linear(a, b, t);                  // çº¿æ€§æ’å€¼
Phaser.Math.Between(min, max);                // éšæœºæ•´æ•°
Phaser.Math.FloatBetween(min, max);           // éšæœºæµ®ç‚¹
Phaser.Display.Color.IntegerToColor(0xff0000); // é¢œè‰²è½¬æ¢
```

## å¸¸è§æ¸¸æˆæ¨¡å¼

### è€è™æœº (Slot Machine)

å…³é”®æŠ€æœ¯ï¼šContainer + Mask + è‡ªå®šä¹‰ç¼“åŠ¨

```typescript
class Reel {
  private symbols: Phaser.GameObjects.Container[] = [];
  private offset = 0;
  private speed = 0;
  
  update(delta: number) {
    this.offset += this.speed * (delta / 1000);
    // å¾ªç¯æ»šåŠ¨ï¼šé¡¶éƒ¨ç¬¦å·ç§»åˆ°åº•éƒ¨
    while (this.offset >= SYMBOL_SIZE) {
      this.offset -= SYMBOL_SIZE;
      const first = this.symbols.shift()!;
      this.symbols.push(first);
    }
    // æ›´æ–°ä½ç½®
    this.symbols.forEach((s, i) => s.setY(startY + i * SYMBOL_SIZE + this.offset));
  }
}
```

### å¹³å°è·³è·ƒ

è§ `references/patterns.md` - å¹³å°è·³è·ƒæ¨¡å¼

### å°„å‡»æ¸¸æˆ

è§ `references/patterns.md` - å°„å‡»æ¨¡å¼ + å¯¹è±¡æ± 

### æ¶ˆé™¤æ¸¸æˆ

è§ `references/patterns.md` - æ¶ˆé™¤æ¨¡å¼

## è¯¦ç»†å‚è€ƒæ–‡æ¡£

| æ–‡æ¡£ | å†…å®¹ |
|------|------|
| `references/core-architecture.md` | Game é…ç½®ã€åœºæ™¯ç³»ç»Ÿã€ç”Ÿå‘½å‘¨æœŸ |
| `references/scene-api.md` | Scene APIï¼šåˆ‡æ¢/å¹¶è¡Œ/çŠ¶æ€/äº‹ä»¶ |
| `references/game-objects.md` | Spriteã€Textã€Graphicsã€Containerã€Group |
| `references/physics.md` | Arcade/Matter.js ç‰©ç†ã€ç¢°æ’æ£€æµ‹ |
| `references/input.md` | é”®ç›˜ã€é¼ æ ‡ã€è§¦æ‘¸ã€æ‹–æ‹½ |
| `references/animation.md` | å¸§åŠ¨ç”»ã€è¡¥é—´åŠ¨ç”»ã€ç²’å­ç³»ç»Ÿ |
| `references/camera-audio.md` | ç›¸æœºæ§åˆ¶ã€ç‰¹æ•ˆã€éŸ³é¢‘ |
| `references/patterns.md` | å¹³å°è·³è·ƒã€å°„å‡»ã€è·‘é…·ã€æ¶ˆé™¤ã€çŠ¶æ€æœº |
| `references/slot-machine.md` | è€è™æœºå®Œæ•´å®ç°ï¼šæ»šåŠ¨ã€ç¼“åŠ¨ã€ä¸­å¥–æ£€æµ‹ |
| `references/platformer-feel.md` | æ‰‹æ„Ÿä¼˜åŒ–ï¼šCoyote Timeã€è·³è·ƒç¼“å†²ã€è¾¹ç¼˜å®½å®¹ |

## è°ƒè¯•

```typescript
// ç‰©ç†è°ƒè¯•
physics: { arcade: { debug: true } }

// FPS
this.add.text(10, 10, '').setText(`FPS: ${Math.round(this.game.loop.actualFps)}`);
```
